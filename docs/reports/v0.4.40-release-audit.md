# fast-agent v0.4.40 — release notes vs git tag (and what landed after the tag)

This document is an English audit against the GitHub release text for `v0.4.40`:
https://github.com/evalstate/fast-agent/releases/tag/v0.4.40

If something is ambiguous, assume the release page is the intended description. This audit focuses on places where the git tag contents do not line up with what the release page describes, plus notable gaps (things shipped but not called out).

Reference points used in this audit:
- `v0.4.37` (tag): `b10bd77e`
- `v0.4.40` (tag): `b47dbfa1`
- latest upstream at time of audit (`origin/main`): `cb9dd0f5` (`v0.4.40-11-gcb9dd0f5`)

---

## Features described in the release notes but NOT present in the `v0.4.40` git tag (landed after tag)

The `v0.4.40` GitHub release text describes features that are **not actually included** in the `v0.4.40` git tag.
They landed on `main` only **after** the tag cut (notably via PR #639).

### 1) Agent lifecycle hooks (PR #639)

Release notes mention lifecycle hooks (`on_start` / `on_shutdown`).
In the `v0.4.40` git tag there is no `lifecycle_hooks` support in AgentCard/AgentConfig, and no lifecycle hook loader/context.

### 2) `/model reasoning` + `?reasoning=...` model-string parsing (PR #639)

Release notes describe:
- `/model reasoning`
- `model: ...?reasoning=...` query params (e.g. `codexplan?reasoning=xhigh`)

In the `v0.4.40` git tag:
- there is no ACP `/model` slash command,
- there is no `?reasoning=` parsing; reasoning effort is still driven by the legacy `provider.model.low|medium|high` suffix + config fields.

Practical impact: users installing exactly the `v0.4.40` tag will not get the lifecycle hooks and reasoning UX as described on the release page.

---

## But the tag also installs **two** console scripts: `apply_patch` and `apply-patch` (is this a mistake?)

The `v0.4.40` tag installs **two** console scripts:
- `apply_patch`
- `apply-patch`

This looks intentional (not a mistake):
- Both map to the same entrypoint (`fast_agent.patch.cli:main`).
- The CLI usage string explicitly mentions both forms: `apply_patch 'PATCH'` and piping into `apply-patch`.

What *is* missing is that the release notes only mention the `apply_patch` tool, but do not call out the second alias (`apply-patch`).

---

## Other important mismatch (release notes vs tag)

### 1) Release notes have a command example that does not match implementation in the tag

Release notes say:
- “To create a subagent at runtime, simply use `/agent <filename> --tool`.”

In the `v0.4.40` tag code path:
- `/agent <name> --tool` attaches an already-loaded agent by **agent name**.
- `/card <filename|url> [--tool]` loads AgentCard(s) from **file/URL**, and `--tool` attaches loaded agent(s) as tools to the current agent.

So the example likely should use `/card <filename> --tool` (not `/agent <filename> --tool`) if the intent is “load from file and expose as tool”.

---

## Gaps: shipped in `v0.4.40` (tag) but not explicitly called out in release notes

These are not necessarily “bugs”, but they are user-visible or operationally relevant and currently easy to miss if you only read the release page.

### 1) Model alias routing change (provider switch) not mentioned

In the `v0.4.40` tag, the model alias `kimithink` switches provider endpoint from `...:novita` to `...:together`.
That can change behavior/cost/availability for users relying on that alias.

### 2) Windows Codex OAuth improvement (PR #629) not mentioned explicitly

PR #629 (“Dev/0.4.38”) mentions:
- “chunk codex oauth on windows”
- “completion improvements”

The release page has a “Codex Plan support” section, but does not call out these platform-specific improvements.

### 3) `/prompts` exists (at least in the TUI/shared command handlers) but is not mentioned

`v0.4.40` includes shared prompt handlers/rendering and a usage hint referencing `/prompts`.
The release page does not mention `/prompts`.

---

## What the release notes describe that matches the `v0.4.40` tag reasonably well (mostly OK)

Everything below looks aligned with the `v0.4.40` tag (as described on the release page).

- **Skills**
  - `/skills` + add/remove/registry flows; marketplace integration.
- **Tool hooks**
  - `before_llm_call`, `after_llm_call`, `before_tool_call`, `after_tool_call`, `after_turn_complete`.
  - hook indicator glyph `◆` in UI.
- **A3 UI refresh**
  - Major CLI-first UX refresh for supervising tool loops/subagents.
- **Integrated shell**
  - `!` to run shell, `exit` to return; completion support.
- **Agent query**
  - `#` sends a message to an agent and returns response to the input buffer.
- **Shell output truncation**
  - default 5 lines via `shell_settings.output_display_lines` + `/history review` to inspect full output.
- **Sessions + history management**
  - `/history rewind`, `/session resume`, `--resume`, `/session fork`, `/session title`.
- **Environments**
  - `--env <dir>` environment root concept.
- **Codex Plan support**
  - `fast-agent auth codexplan`, `--model codexplan`, `$` status indicator.
- **Aliyun model support**
  - Release notes mention “Qwen3-Max added”; assume this is the intended model support story for the release.
